
# OctoCRM

## Features

- User authentication and authorization
- Project management
- GitHub integration for repositories details
- Task scheduling and background processing
- RESTful API with Swagger documentation
- Responsive web interface

## Technology Stack

### Backend
- [NestJS](https://nestjs.com/) - A progressive Node.js framework
- [MongoDB](https://www.mongodb.com/) - NoSQL database
- [Mongoose](https://mongoosejs.com/) - MongoDB object modeling
- [BullMQ](https://docs.bullmq.io/) - Queue system for background jobs
- [JWT](https://jwt.io/) - JSON Web Tokens for authentication

### Frontend
- [React](https://reactjs.org/) - JavaScript library for building user interfaces
- [Mantine](https://mantine.dev/) - React components library
- [React Query](https://tanstack.com/query/latest) - Data fetching and state management
- [React Router](https://reactrouter.com/) - Routing for React applications

### DevOps & Tools
- [Nx](https://nx.dev/) - Monorepo build system
- [Docker](https://www.docker.com/) - Containerization
- [ESLint](https://eslint.org/) - Code linting
- [Prettier](https://prettier.io/) - Code formatting
- [Husky](https://typicode.github.io/husky/) - Git hooks

## Project Structure

The project is organized as a monorepo using Nx:

```
octo-crm/
├── apps/                  # Applications
│   ├── client/            # React frontend
│   └── server/            # NestJS backend
├── libs/                  # Shared libraries
│   ├── core/              # Core domain models and utilities
│   ├── server/            # Server-specific libraries
│   │   ├── api/           # API modules
│   │   ├── domain/        # Domain logic
│   │   ├── infra/         # Infrastructure modules (MongoDB, GitHub, etc.)
│   │   └── worker/        # Background job workers
│   └── shared/            # Shared utilities
├── docker-compose.yml     # Docker Compose configuration
├── Dockerfile             # Docker build configuration
└── package.json           # Project dependencies and scripts
```

## Installation

### Prerequisites

- [Node.js](https://nodejs.org/) (v22.x recommended)
- [Yarn](https://yarnpkg.com/) package manager
- [MongoDB](https://www.mongodb.com/) (v8.x recommended)
- [Redis](https://redis.io/) (v8.x recommended)
- [Docker](https://www.docker.com/) and [Docker Compose](https://docs.docker.com/compose/) (optional, for containerized setup)

### Local Setup

1. Clone the repository:
   ```bash
   git clone git@github.com:uamanager/octo-crm.git && cd octo-crm
   ```

2. Install dependencies:
   ```bash
   yarn install
   ```

3. Set up environment variables:
   ```bash
   yarn env
   ```
   This will create a `.env` file from the template and generate JWT keys.

4. Start MongoDB and Redis (if not using Docker):
  - Ensure MongoDB is running on port 27017
  - Ensure Redis is running on port 6379

5. Start the development servers:
   ```bash
   # Start backend server
   yarn start:server
   
   # Start frontend client (in a separate terminal)
   yarn start:client
   ```

### Docker Setup

1. Set up environment variables for Docker:
   ```bash
   yarn env:compose
   ```

2. Start the application using Docker Compose:
   ```bash
   yarn start:compose
   ```

   Or to rebuild containers:
   ```bash
   yarn start:compose:build
   ```

3. The application will be available at http://localhost:3000

## Environment Configuration

The following environment variables are required:

- `MONGO_URI`: MongoDB connection string
- `REDIS_HOST`: Redis host
- `REDIS_PORT`: Redis port
- `GITHUB_API_KEY`: GitHub API key for integration
- `JWT_PRIVATE_KEY`: RSA private key for JWT (generated by jwt.sh)
- `JWT_PUBLIC_KEY`: RSA public key for JWT (generated by jwt.sh)
- `SWAGGER_ENABLED`: Enable/disable Swagger documentation

## Available Scripts

- `yarn prepare`: Set up Husky git hooks
- `yarn lint`: Run linting on all projects
- `yarn start:server`: Start the backend server
- `yarn start:client`: Start the frontend client
- `yarn build`: Build all projects
- `yarn build:prod`: Build all projects for production
- `yarn start:compose`: Start the application using Docker Compose
- `yarn start:compose:build`: Start and build the application using Docker Compose
- `yarn env`: Create local environment file and generate JWT keys
- `yarn env:compose`: Create Docker environment file and generate JWT keys

## Development

### Code Quality

The project uses ESLint and Prettier for code quality:

```bash
# Run linting
yarn lint

# Format code
npx prettier --write .
```

## Contributing

1. Create a feature branch from `main`
2. Make your changes
3. Submit a pull request

Please follow the conventional commit format for your commits.

## License

This project is licensed under the MIT License - see the LICENSE file for details.
